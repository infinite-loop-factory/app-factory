# 공공포탈 API 조사 및 선정

이 문서는 Dist Interactive Metro 앱에서 사용할 지하철 노선 및 역 정보 API를 조사하고 선정하는 과정을 기록합니다.

## 📊 최종 결정 사항

### 데이터 범위
- **수도권 전체**: 서울-인천-경기
- **포함 노선**: 서울 지하철 1~9호선, 신분당선, GTX, 분당선, 경의중앙선 등

### 데이터 수집 방식
- **오프라인 지원 제거**: 정확도 및 신뢰성 문제로 제외
- **실시간 API 호출**: 앱 실행 시마다 API 호출하여 최신 정보 확인
- **캐싱 전략**: 세션 내 캐싱만 활용 (앱 종료 시 초기화)

### 필수 수집 데이터
1. 각 정거장별 빠른 환승 지점
2. 각 정거장별 빠른 하차 지점
3. 출발 시간 정보
4. 도착 시간 정보
5. 운임 정보 (비용 계산)

### 선택 수집 데이터 (채택됨)
- A. 혼잡도 정보 ✅
- C. 출구별 정보 ✅
- E. 열차 시간표 정보 ✅
- F. 환승 통로 정보 ✅
- H. 노선별 색상 정보 ✅
- I. 실시간 열차 위치 ✅

---

## 🔍 조사된 API 및 데이터 소스

### 1. 국토교통부(TAGO)_지하철정보 API ⭐ 추천
**제공기관**: 국토교통부  
**URL**: https://www.data.go.kr/data/15098554/openapi.do

**제공 기능**:
1. **키워드 기반 지하철역 목록 조회**
   - 지하철역명 검색
   - 역 정보 조회
   - 요청 주소: `http://apis.data.go.kr/1613000/SubwayInfoService/getKwrdFndSubwaySttnList`

2. **지하철역 출구별 버스노선 목록 조회**
   - 역의 각 출구별 연결되는 버스노선 정보

3. **지하철역 출구별 주변시설 목록 조회**
   - 역 출구 주변 편의시설 정보

4. **지하철역별 시간표 목록 조회** ✅ 필수
   - 각 역의 열차 시간표 정보
   - 출발/도착 시간 정보 제공

**형식**: JSON + XML  
**API 유형**: REST  
**비용**: 무료  
**트래픽**: 
- 개발계정: 10,000건/일
- 운영계정: 활용사례 등록 시 증가 가능
**심의유형**: 자동승인  
**상태**: ✅ API 제공

**장점**:
- JSON 형식 지원
- 전국 지하철 정보 포함 (수도권 확장 가능)
- REST API로 사용 편리
- 시간표 정보 제공 ✅
- 자동승인

**단점**:
- 트래픽 제한 (개발계정 기준)
- 빠른 환승/하차 지점 정보 직접 제공 여부 불명확 (추가 확인 필요)

---

### 2. 서울교통공사_빠른하차정보 API ⭐ 필수
**제공기관**: 서울교통공사  
**URL**: https://www.data.go.kr/data/15143845/openapi.do

**제공 데이터**:
- 하차역 기준으로 계단, 엘리베이터 등 이동 설비와 가장 가까운 열차 칸 출입문 위치
- 빠르게 이동할 수 있는 하차칸(문) 번호
- 연결된 이동 설비의 위치 정보
- **빠른 하차 지점 정보** ✅ 필수

**형식**: REST API  
**갱신**: 수시 갱신  
**비용**: 무료  
**상태**: ✅ API 제공

**장점**:
- 빠른 하차 지점 정보 직접 제공 ✅
- 실시간 갱신
- REST API

**단점**:
- 서울교통공사 노선만 (1~8호선)
- 다른 노선(9호선, 신분당선 등)은 별도 확인 필요

---

### 3. 서울시 지하철 실시간도착정보 API ⭐ 필수
**제공기관**: 서울특별시  
**URL**: https://www.data.go.kr/data/15058052/openapi.do

**제공 데이터**:
- 역 조회 기반 출발/도착 정보
- 실시간 열차 도착 정보
- **출발/도착 시간 정보** ✅ 필수
- 서울교통공사 1~8호선

**형식**: JSON + XML  
**갱신**: 1분 주기로 갱신  
**비용**: 무료  
**활용신청**: 22,134건  
**상태**: ✅ API 제공

**장점**:
- 실시간 도착 정보 제공 ✅
- 출발/도착 시간 정보 ✅
- 1분 주기 갱신
- JSON 형식 지원

**단점**:
- 서울교통공사 노선만 (1~8호선)
- 다른 노선은 별도 API 필요

**주의사항**:
- 데이터 생성 시각(recptnDt)과 현재 시각의 차이를 보정하여 사용 필요

---

### 4. 서울시 대중교통환승경로 조회 서비스
**제공기관**: 서울특별시  
**URL**: http://ws.bus.go.kr/api/rest/pathinfo

**제공 데이터**:
- 버스와 지하철 환승 경로 검색
- 환승 정보 및 경유 노선 정보
- **환승 경로 정보** ✅ 필수 (빠른 환승 지점 파악 가능)

**형식**: REST API  
**비용**: 무료  
**상태**: ✅ API 제공

**장점**:
- 환승 경로 정보 제공
- 빠른 환승 지점 파악 가능 ✅

**단점**:
- 서울시 중심
- 다른 노선 확장 여부 확인 필요

---

### 5. 서울교통공사_역별 승하차 인원 API
**제공기관**: 서울교통공사  
**URL**: https://www.data.go.kr/data/15143845/openapi.do

**제공 데이터**:
- 각 역사별 승차 및 하차 인원 현황
- 통행 시간, 역명, 역코드, 승하차 인원
- 혼잡도 정보 파악 가능

**형식**: REST API  
**갱신**: 매일 갱신  
**비용**: 무료  
**상태**: ✅ API 제공

**장점**:
- 혼잡도 정보 제공
- 경로 선택 시 참고 가능

**단점**:
- 서울교통공사 노선만
- 실시간성은 제한적 (일일 갱신)

---

### 6. 서울교통공사_노선별 지하철역정보 API
**제공기관**: 서울교통공사  
**URL**: https://www.data.go.kr/data/15058404/openapi.do

**제공 데이터**:
- 전철역코드
- 전철역명 (국문, 영문, 중문, 일문)
- 호선 정보
- 외부코드

**형식**: XML  
**비용**: 무료  
**활용신청**: 9,374건  
**상태**: ✅ API 제공

**장점**:
- 서울 지하철 역 정보 제공
- 다국어 지원

**단점**:
- XML 형식 (JSON 변환 필요)
- 서울교통공사 노선만

---

### 7. 철도데이터포털 Open API
**제공기관**: 한국철도데이터활용센터  
**URL**: https://data.kric.go.kr/rips/M_01_02/intro.do

**제공 데이터**:
- 도시철도 열차별환경정보
- 역사별 공기질측정정보
- 역사별 혼잡도정보 (서울교통공사 평일 기준)
- 열차별 운행시각표
- 58개의 철도 관련 Open API

**형식**: XML, JSON  
**비용**: 무료  
**상태**: ✅ API 제공 (58개)

**장점**:
- 다양한 철도 관련 데이터
- 자동승인 절차
- 수도권 확장 가능성

**단점**:
- API 목록 확인 필요
- 빠른 환승/하차 정보 직접 제공 여부 불명확

---

## 📋 추가 수집 가능한 정보 (선택적)

### A. 혼잡도 정보 ✅ 채택
**API**: 서울교통공사_역별 승하차 인원 API, 철도데이터포털 혼잡도정보

**제공 정보**:
- 각 역별 승하차 인원
- 시간대별 혼잡도
- 열차별 혼잡도

**활용 방안**:
- 경로 선택 시 혼잡도 고려
- 최적 시간대 추천
- 쾌적한 경로 옵션 제공

**상태**: ✅ 채택됨

---

### B. 편의시설 정보
**API**: 국토교통부 API (출구별 주변시설), 서울교통공사 편의시설 정보

**제공 정보**:
- 승강기 위치 및 작동 여부
- 에스컬레이터 위치
- 화장실 위치
- 휠체어 접근 가능 여부
- 장애인 편의시설 정보

**활용 방안**:
- 접근성 고려 경로 추천
- 편의시설 이용 경로 안내
- 장애인 경로 최적화

**필요 여부**: [ ] 필요 [ ] 불필요

---

### C. 출구별 정보 ✅ 채택
**API**: 국토교통부 API (출구별 버스노선, 주변시설)

**제공 정보**:
- 각 출구별 연결 버스노선
- 출구별 주변시설
- 출구별 위치 정보

**활용 방안**:
- 목적지 근처 최적 출구 추천
- 환승 편의성 고려
- 목적지까지 전체 경로 최적화

**상태**: ✅ 채택됨

---

### D. 실시간 운행 상태
**API**: 서울시 지하철 실시간도착정보 API

**제공 정보**:
- 열차 지연 정보
- 운행 중단 정보
- 실시간 도착 예정 시간
- 다음 열차 정보

**활용 방안**:
- 지연 고려 경로 재계산
- 대체 경로 추천
- 실시간 소요 시간 정확도 향상

**필요 여부**: [ ] 필요 [ ] 불필요

---

### E. 열차 시간표 정보 ✅ 채택
**API**: 국토교통부 API (역별 시간표), 서울시 실시간도착정보

**제공 정보**:
- 첫차/막차 시간
- 시간대별 배차 간격
- 평일/주말/공휴일 시간표
- 특별 운행 정보

**활용 방안**:
- 시간대별 경로 최적화
- 첫차/막차 고려
- 배차 간격 고려 경로 선택

**상태**: ✅ 채택됨

---

### F. 환승 통로 정보 ✅ 채택
**API**: 서울시 대중교통환승경로 조회, 빠른하차정보 API

**제공 정보**:
- 환승 통로 위치
- 환승 소요 시간
- 환승 거리
- 환승 난이도 (계단, 엘리베이터 등)

**활용 방안**:
- 빠른 환승 경로 추천
- 환승 난이도 고려
- 환승 소요 시간 정확한 계산

**상태**: ✅ 채택됨

---

### G. 역간 거리 정보
**API**: 서울교통공사_역간거리 CSV (참고용)

**제공 정보**:
- 역간 거리 (km)
- 역간 소요 시간 (분)
- 호선별 누계 거리

**활용 방안**:
- 경로 거리 계산
- 소요 시간 계산
- 거리 기반 경로 최적화

**참고**: CSV 파일이지만, API로 제공되는지 확인 필요

**필요 여부**: [ ] 필요 [ ] 불필요

---

### H. 노선별 색상 및 정보 ✅ 채택
**API**: 각 노선 정보 API

**제공 정보**:
- 노선 색상 코드
- 노선명 (한글, 영문)
- 노선 번호
- 노선 운영 기관

**활용 방안**:
- UI 노선 색상 표시
- 노선 구분
- 시각적 경로 표시

**상태**: ✅ 채택됨

---

### I. 실시간 열차 위치 ✅ 채택
**API**: 실시간도착정보 API (추정)

**제공 정보**:
- 현재 열차 위치
- 다음 역 도착 예정 시간
- 열차 번호

**활용 방안**:
- 실시간 경로 추적
- 정확한 도착 시간 예측
- 다음 열차 대기 시간 계산

**상태**: ✅ 채택됨

---

### J. 공기질 및 환경 정보
**API**: 철도데이터포털 (열차별환경정보, 역사별 공기질)

**제공 정보**:
- 역사별 공기질 측정 정보
- 열차별 환경 정보
- 미세먼지 수치

**활용 방안**:
- 건강 고려 경로 추천
- 환경 친화적 경로 선택

**필요 여부**: [ ] 필요 [ ] 불필요

---

### K. 운임 정보 (비용 계산) ✅ 채택 - 필수
**API**: 서울교통공사_실시간 운임정보 API  
**URL**: https://www.data.go.kr/data/15143846/openapi.do

**제공 정보**:
- 출발역과 도착역 입력 시 실시간 운임정보
- 일반/청소년/어린이별 카드 및 현금 요금
- 이동거리 기반 운임
- 기후동행카드 승하차 정보
- 총거리, 수도권내외 구간 정보

**형식**: REST API  
**갱신**: 수시 갱신, 매일 정기갱신  
**비용**: 무료  
**상태**: ✅ API 제공

**활용 방안**:
- 경로별 운임 계산 및 표시
- 최저 비용 경로 추천
- 사용자별 요금 정보 제공 (일반/청소년/어린이)
- 거리 기반 요금 계산

**장점**:
- 실시간 운임 정보 제공 ✅
- 다양한 요금 유형 지원
- REST API로 사용 편리

**단점**:
- 서울교통공사 노선 중심 (다른 노선 확인 필요)
- 수도권 전체 노선 운임 정보 확인 필요

**참고**: 
- 서울교통공사 운임표 CSV 파일도 참고 가능
- 최단거리 기준의 거리비례요금제 적용
- 별도 운임이 부과되는 노선 이용 시 추가 운임 발생 가능

---

## 🎯 추천 API 조합 전략

### 필수 API (확정)
1. **국토교통부(TAGO)_지하철정보 API**
   - 역 목록 조회
   - 역별 시간표 조회 ✅
   - 출구별 정보 ✅ (C)

2. **서울교통공사_빠른하차정보 API**
   - 빠른 하차 지점 정보 ✅

3. **서울시 지하철 실시간도착정보 API**
   - 출발/도착 시간 정보 ✅
   - 실시간 도착 정보
   - 실시간 열차 위치 ✅ (I)

4. **서울시 대중교통환승경로 조회**
   - 빠른 환승 지점 파악 ✅
   - 환승 통로 정보 ✅ (F)

5. **서울교통공사_실시간 운임정보 API**
   - 운임 정보 (비용 계산) ✅ (K)

### 선택적 API (채택됨)
- ✅ A. 혼잡도 정보 (서울교통공사_역별 승하차 인원 API, 철도데이터포털)
- ✅ C. 출구별 정보 (국토교통부 API)
- ✅ E. 열차 시간표 정보 (국토교통부 API, 서울시 실시간도착정보)
- ✅ F. 환승 통로 정보 (서울시 대중교통환승경로 조회)
- ✅ H. 노선별 색상 정보 (각 노선 정보 API)
- ✅ I. 실시간 열차 위치 (서울시 실시간도착정보 API)
- ✅ K. 운임 정보 (서울교통공사_실시간 운임정보 API)

### 미채택 정보
- B. 편의시설 정보
- D. 실시간 운행 상태 (일부는 실시간도착정보에 포함)
- G. 역간 거리 정보 (운임 정보에 포함될 수 있음)
- J. 공기질 정보

---

## 📋 검토 및 확정 필요 사항

### 1. 수도권 노선별 API 확인
- [ ] **신분당선**: 별도 API 확인 필요
- [ ] **GTX**: 별도 API 확인 필요
- [ ] **9호선**: 국가철도공단 API 확인
- [ ] **분당선**: 국가철도공단 API 확인
- [ ] **경의중앙선**: 별도 API 확인 필요
- [ ] **인천 지하철**: 인천시 API 확인 필요
- [ ] **경기 지하철**: 경기도 API 확인 필요

**작업 필요**: 각 노선별 API 존재 여부 및 제공 정보 확인

---

### 2. 빠른 환승 지점 정보
- [ ] **국토교통부 API에 포함 여부 확인**
- [ ] **서울시 환승경로 API로 충분한지 확인**
- [ ] **다른 노선(신분당선, GTX 등) 환승 정보 API 확인**

**현재 상태**: 서울시 환승경로 API로 일부 가능, 다른 노선 확인 필요

---

### 3. API 키 발급 (준비 필요)
- [ ] **공공데이터포털 회원가입** (data.go.kr)
- [ ] **국토교통부 API 활용신청**
- [ ] **서울교통공사 API 활용신청**
- [ ] **서울시 API 활용신청**
- [ ] **철도데이터포털 회원가입** (필요 시)
- [ ] **각 노선별 운영기관 API 확인 및 신청** (신분당선, GTX 등)

**준비 사항**: 
- 공공데이터포털 계정 생성
- 각 API별 키 발급 및 관리
- 운영계정 전환 검토 (트래픽 증가 시)

---

### 4. 선택적 정보 채택 ✅ 완료
**채택된 정보**:
- ✅ A. 혼잡도 정보
- ✅ C. 출구별 정보
- ✅ E. 열차 시간표 정보
- ✅ F. 환승 통로 정보
- ✅ H. 노선별 색상 정보
- ✅ I. 실시간 열차 위치
- ✅ K. 운임 정보 (비용 계산) - 필수

**미채택 정보**:
- B. 편의시설 정보
- D. 실시간 운행 상태 (일부는 실시간도착정보에 포함)
- G. 역간 거리 정보 (운임 정보에 포함될 수 있음)
- J. 공기질 정보

---

### 5. 트래픽 및 비용
- [ ] **일일 API 호출량 예상**: ?
- [ ] **트래픽 제한 확인**:
  - 국토교통부: 10,000건/일 (개발계정)
  - 운영계정 전환 필요 여부
- [ ] **캐싱 전략**: 세션 내 캐싱만 (앱 종료 시 초기화)

---

### 6. 데이터 동기화 전략
- [ ] **앱 실행 시**: 최신 여부 확인 API 호출
- [ ] **데이터 갱신 주기**: 실시간 (1분 주기) vs 요청 시마다
- [ ] **세션 캐싱**: 같은 세션 내 중복 호출 방지

---

## 🔧 기술적 고려사항

### API 클라이언트 구현
- REST API 호출 (fetch 또는 axios)
- 에러 처리 및 재시도 로직
- 세션 내 캐싱 (메모리 캐싱)
- 여러 API 동시 호출 최적화

### 데이터 통합
- 여러 API 데이터 병합 로직
- 데이터 일관성 보장
- 빠른 환승/하차 지점 계산 알고리즘

### 성능 최적화
- API 호출 최소화
- 병렬 API 호출
- 응답 시간 최적화

---

## 📝 다음 단계

1. **사용자 검토 및 확정** (현재 단계)
   - 위의 검토 사항 확인 및 결정
   - 선택적 정보 채택

2. **수도권 노선별 API 추가 조사** (개발자 작업)
   - 신분당선, GTX, 9호선, 분당선 등 각 노선별 API 확인

3. **API 키 발급** (사용자 작업)
   - 공공데이터포털 회원가입
   - 필요한 API 활용신청

4. **API 샘플 확인** (개발자 작업)
   - 선정된 API의 실제 응답 확인
   - 데이터 구조 분석

5. **API 클라이언트 구현** (개발자 작업)
   - API 호출 로직 구현
   - 데이터 파싱 및 변환
   - 통합 로직 구현

---

## 📚 참고 링크

- [공공데이터포털](https://www.data.go.kr/)
- [서울열린데이터광장](https://data.seoul.go.kr/)
- [철도데이터포털](https://data.kric.go.kr/)
- [국토교통부(TAGO)_지하철정보 API](https://www.data.go.kr/data/15098554/openapi.do)
- [서울교통공사_빠른하차정보 API](https://www.data.go.kr/data/15143845/openapi.do)
- [서울시 지하철 실시간도착정보 API](https://www.data.go.kr/data/15058052/openapi.do)
- [서울시 대중교통환승경로 조회](http://ws.bus.go.kr/api/rest/pathinfo)
- [서울교통공사_실시간 운임정보 API](https://www.data.go.kr/data/15143846/openapi.do)
- [서울교통공사_역별 승하차 인원 API](https://www.data.go.kr/data/15143845/openapi.do)

---

**마지막 업데이트**: 2026-01-25
