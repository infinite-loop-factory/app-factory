# Dist Interactive Metro — 앱 개념 및 구성 개요

이 문서는 Dist Interactive Metro 앱의 전체적인 구성, 컨셉, 아이디어를 한곳에 정리한 개요 문서입니다. 기획·설계 단계에서 결정된 내용을 이해한 범위에서 상세히 풀어 썼으며, 수정이 필요한 부분은 요청해 주시면 반영하겠습니다.

---

## 1. 앱 정체성

### 1.1 이름의 의미

- **Dist**: Distance(거리)의 약어. 출발 승강장에서 도착 승강장까지의 **실제 거리**를 기준으로 경로를 추천한다는 의미.
- **Interactive**: 사용자와의 상호작용(역 선택, 경로 옵션 선택)과, **현재 위치(GPS)**와의 연동으로 경로가 달라지는 인터랙티브한 경험을 강조.
- **Metro**: 지하철(수도권 지하철·광역철도 포함) 경로 안내 앱임을 나타냄.

정리하면, **「거리 기반 + 현재 위치 연동」 지하철 경로 추천 앱**이라는 정체성을 이름에 담고 있습니다.

### 1.2 한 줄 요약

> 출발 승강장에서 도착 승강장까지의 **실제 거리**를 기준으로 최적 경로를 추천하고, **현재 위치(GPS)**를 반영해 여러 경로 옵션을 제안하는 지하철 경로 안내 앱.

---

## 2. 핵심 아이디어와 문제·해결

### 2.1 풀고자 하는 문제

- 기존 경로 앱은 **역 단위**로만 출발·도착을 다루거나, **시간/환승 횟수** 위주인 경우가 많음.
- 사용자는 **지금 서 있는 위치**에서 **목적지 역**까지 갈 때,  
  - 실제로 걸어야 하는 **총 거리(승강장 간 거리 + 환승 통로 등)**가 얼마인지,  
  - **현재 위치에서 가장 가까운 탑승역**이 어디인지,  
  - 그에 맞는 **여러 경로 옵션**(최단 거리, 최소 환승, GPS 최적 등)을 한눈에 보고 싶어 함.

즉, **「거리」와 「현재 위치」**를 중심에 두고 경로를 제안하는 경험이 부족하다는 전제가 있습니다.

### 2.2 제안하는 해결 방식

1. **거리 기반 경로 추천**  
   - 역 간·승강장 간 **실제 거리(미터 단위)** 데이터를 활용해, 총 이동 거리가 명확한 경로를 계산·표시.
2. **GPS 기반 출발역 추천 및 경로 최적화**  
   - 현재 위치에서 가장 가까운 역을 출발역 후보로 자동 추천.  
   - 현재 위치 → 추천 출발역 → 도착역까지를 한 흐름으로 보고, **전체 거리·소요 시간이 최적화된 경로**를 옵션으로 제공.
3. **다중 경로 옵션**  
   - 한 번의 검색으로 **최단 거리**, **최소 환승**, **GPS 최적**(현재 위치 기준) 등 여러 옵션을 함께 제시해, 사용자가 목적에 맞게 선택할 수 있게 함.

이 세 가지가 앱의 **핵심 가치**이자 **차별화 포인트**입니다.

---

## 3. 참조 앱과의 관계 (지하철종결자)

### 3.1 참조하는 점

- **데이터 활용 방식 전반**: 노선·역·역 간 거리·환승 정보를 어떻게 구조화하고, 어떤 API/데이터 소스를 쓰는지에 대한 아이디어를 지하철종결자 앱 방식을 참고.
- **경로 탐색 관점**: 거리·환승을 고려한 경로 계산 로직 설계 시 참고.
- 즉, **데이터 구조와 경로 탐색의 “방식”**을 모방하되, 필요한 부분만 개선·확장하는 전략.

### 3.2 차별화하는 점

- **현재 위치(GPS) 활용**:  
  - 출발역을 “선택만” 하는 것이 아니라, **현재 위치 기반 최근 역 추천** → **그 역을 출발로 한 경로 최적화**까지 한 번에 제안.
- **친숙한 홈 UX**:  
  - 홈 화면은 **출발역(빈칸)·도착역(빈칸)**을 기본으로 두고, 경유 추가는 선택 옵션. 출발/도착/경유 중 어떤 칸을 누르느냐에 따라 **각각 다른 선택 인터페이스**가 열려 목적에 맞는 검색·목록·GPS 추천을 제공.
- **다중 경로 옵션의 명시**:  
  - 최단 거리, 최소 환승, GPS 최적 등을 구분해 여러 옵션을 동시에 제시하고, 사용자가 비교·선택할 수 있게 함.

정리하면, **데이터·알고리즘 설계는 지하철종결자에 가깝게 가져가고, UX와 GPS 연동으로 차별화**하는 구조입니다.

---

## 4. 서비스 범위와 데이터 전략

### 4.1 지리·노선 범위

- **현재 목표(1차)**: **수도권** — 서울·인천·경기.  
  - 서울 지하철 1~9호선, 신분당선, GTX, 분당선, 경의중앙선 등 **수도권에서 이용 가능한 노선**을 포함하는 범위로 이해했습니다.
- **향후 목표**: 전국 노선 지원.  
  - 전국 확장은 **TODO**로 두고, 데이터 구조·API 설계 시 확장 가능성을 고려해 두는 수준.

### 4.2 데이터 소스 및 갱신

- **소스**: 공공포탈 API(국토교통부 TAGO, 서울교통공사, 서울시 등)를 주된 데이터 소스로 사용.
- **갱신**:  
  - 앱 실행 시 등 **필요 시점에 API를 호출**해 최신 정보를 확인하는 방식을 우선.  
  - 데이터 정확도·신뢰성을 위해 **실시간에 가까운 API 활용**을 선호한다는 전제가 있습니다.

### 4.3 오프라인·캐싱

- **오프라인 지원**:  
  - API 조사 문서(api-research.md) 기준으로, **정확도·신뢰성 문제로 완전 오프라인 지원은 제외**하고, **실시간 API 호출 + 세션 내 캐싱**으로 정리된 것으로 이해했습니다.
- **캐싱**:  
  - **세션 내 캐싱**만 활용(앱 종료 시 초기화).  
  - 필요 시 AsyncStorage 또는 SQLite로 세션 단위 캐시를 두는 수준.

다만 PROJECT_STATUS.md의 MVP 범위에는 “오프라인 지원 (캐시 활용)”이 포함되어 있어, **실제 구현 시에는 “세션 캐시만”으로 할지, “일정 기간 로컬 캐시로 제한적 오프라인”까지 할지** 한 번 더 정리하는 것이 좋아 보입니다. 필요하면 이 부분만 따로 짚어서 수정 요청해 주셔도 됩니다.

---

## 5. 사용자 플로우와 UX 컨셉

### 5.1 홈 화면 기본 구성

홈 화면은 **가장 친숙하고 편리한 형태**로 구성합니다.

- **기본 레이아웃**: 출발역(빈칸) + 도착역(빈칸)이 나란히 또는 위·아래로 배치된 구조.
- **선택 영역**:
  - **출발역(빈칸)** — 탭 시 출발역 전용 선택 인터페이스로 이동.
  - **도착역(빈칸)** — 탭 시 도착역 전용 선택 인터페이스로 이동.
  - **경유 추가**(선택) — 탭 시 경유역 추가 전용 인터페이스로 이동.
- **각 빈칸/옵션 선택 시 서로 다른 인터페이스**: 출발역 선택, 도착역 선택, 경유 추가는 각각 **별도 화면 또는 전용 UI**로 제공해, 목적에 맞는 검색·목록·GPS 추천 등만 노출합니다.

즉, “출발 / 도착 / 경유”를 같은 한 화면에서 구분해 두고, 사용자가 어떤 칸을 눌렀는지에 따라 **다른 선택 인터페이스**가 열리는 구조입니다.

### 5.2 화면 구성(요약)

1. **홈 화면**: 출발역(빈칸)·도착역(빈칸)·경유 추가(선택). 각 영역 탭 시 해당 전용 인터페이스로 이동.
2. **출발역 선택 인터페이스**: 출발역 전용. 역 검색·노선별 목록·GPS 기반 최근 역 추천 등.
3. **도착역 선택 인터페이스**: 도착역 전용. 역 검색·노선별 목록. 출발역과 동일 역 선택 방지.
4. **경유 추가 인터페이스**: 경유역 전용. 경유역 검색·목록·순서 조정 등.
5. **경로 결과 화면**: 여러 경로 옵션(최단 거리, 최소 환승, GPS 최적 등)을 리스트/카드 형태로 제시.
6. **경로 상세 화면**: 선택한 경로의 구간별 상세(역 순서, 거리, 소요 시간, 환승 정보 등).

### 5.3 두 가지 대표 시나리오

- **시나리오 1 — 기본 경로 탐색**  
  - 출발역·도착역을 모두 사용자가 선택 → “경로 찾기” → 결과에서 여러 옵션 확인 → 하나 선택 후 상세 보기.  
  - GPS 사용 시에는 출발역 후보로 “현재 위치 근처 역”을 추천해 주는 정도로 활용.

- **시나리오 2 — GPS 기반 자동 경로 추천**  
  - 위치 권한 허용 시, **현재 위치에서 가장 가까운 역**을 출발역으로 자동 추천.  
  - 사용자는 도착역만 선택하면 되고, “현재 위치 → 추천 출발역 → 도착역”까지를 고려한 **최적화된 여러 경로**를 받음.  
  - 이 흐름이 앱의 **핵심 차별화 시나리오**입니다.

### 5.4 역 검색·선택

- 역명 검색(한글·영문), 자동완성, 노선별 역 목록.  
- 도착역 선택 시에는 출발역과 동일 역 선택 방지.  
- GPS 활성화 시 역 선택 화면에서 “현재 위치 근처 역”을 상단 등에 노출해 빠르게 선택할 수 있게 함.

### 5.5 경로 결과·상세에서 보여주는 것

- **경로 요약**: 총 거리(미터/킬로미터), 환승 횟수, 경유 역 수, **총 소요 시간**, **운임(비용)**.  
- **구간별**: 승차역·하차역, 구간 거리, 소요 시간, 환승역·환승 노선.  
- **시각적 표현**: 노선 색상, 환승역 강조 등으로 경로를 한눈에 파악 가능하게.  
- GPS 기반으로 추천된 경로는 “현재 위치 기준 최적” 등으로 표시해 구분.

소요 시간 계산과 운임(비용) 표시는 **필수 기능**으로 이해했습니다.

---

## 6. 데이터·기능 요구사항 정리

### 6.1 필수로 수집·표시할 데이터

- 각 정거장별 **빠른 환승 지점**  
- 각 정거장별 **빠른 하차 지점**  
- **출발·도착 시간** 정보(경로별 소요 시간 계산에 활용)  
- **운임 정보**(비용 계산)

그리고 경로 탐색을 위해 필요한 **노선·역·역 간 거리·환승 정보**는 기본 전제입니다.

### 6.2 선택 수집 데이터(채택된 항목)

- **혼잡도**  
- **출구별 정보**  
- **열차 시간표**  
- **환승 통로 정보**  
- **노선별 색상**  
- **실시간 열차 위치** (가능한 범위에서)

이들은 UX 개선·정보 풍부화용으로, API와 구현 여건을 보면서 단계적으로 반영하는 수준으로 이해했습니다.

---

## 7. 경로 탐색·알고리즘

- **그래프 모델**: 노선·역·역 간 거리를 **그래프**로 표현(역 또는 승강장 단위는 설계 시 결정).
- **최단 거리 경로**: **다익스트라** 알고리즘으로 “총 이동 거리”가 최소인 경로 계산.
- **최소 환승 경로**: **BFS** 등으로 환승 횟수를 최소화하는 경로 계산.
- **다중 경로**: 위 두 가지에 더해, **현재 위치에서 출발역까지의 거리**를 포함한 “GPS 최적” 경로를 별도 옵션으로 계산.
- **거리·시간**: 역 간 거리 누적 + 환승 통로 거리 반영, 소요 시간은 시간표·평균 속도 등으로 추정(실시간 정보 반영은 가능 범위에서).

A* 등 추가 최적화는 향후 개선 단계에서 검토하는 수준으로 이해했습니다.

---

## 8. 기술 스택과 아키텍처

- **프레임워크**: Expo SDK ~54, React Native 0.81.5 — 프로젝트(모노레포) 공통 스택 활용.
- **언어**: TypeScript 5.9+  
- **라우팅**: Expo Router (파일 기반)  
- **UI**: NativeWind(Tailwind), Gluestack UI, 노선 공식 색상 등으로 지하철 테마 유지.  
- **상태 관리**: Context API (프로젝트 내 다른 앱과 동일 패턴).  
- **위치**: expo-location으로 GPS 권한·현재 위치 조회.  
- **데이터**: 공공포탈 API 클라이언트 + 파싱·변환 로직, 세션 캐시(필요 시 AsyncStorage/SQLite).  
- **i18n**: i18n-js, 한국어·영어.

프로젝트 내 공유 패키지(@infinite-loop-factory/common 등)와 컨벤션을 따르며, **앱 고유 로직(경로 계산, 역 검색, GPS 연동)**만 이 앱 전용으로 두는 구조로 이해했습니다.

---

## 9. MVP와 향후 계획

### 9.1 MVP에 포함

- 수도권 노선 지원  
- 출발역·도착역 선택 (검색, 노선별 목록)  
- GPS 기반 최근 역 추천 및 경로 최적화  
- 최단 거리·최소 환승·다중 경로 옵션  
- 거리·소요 시간·운임(비용) 표시  
- 경로 결과·경로 상세 화면  
- (캐싱 전략에 따라) 세션 캐시 또는 제한적 오프라인

### 9.2 MVP 이후·향후

- 전국 노선 확장  
- 실시간 운행 정보  
- 즐겨찾기, 경로 공유, 알림 등 부가 기능

---

## 10. UI·디자인 방향

- **톤**: 모던하고 미니멀한 지하철 앱 느낌.  
- **색상**: 서울·수도권 지하철 **노선 공식 색상** 사용.  
- **플랫폼**: 모바일 우선(iOS/Android), 필요 시 웹.  
- **접근성**: 터치 영역(최소 높이 등), 로딩·에러 상태, GPS 권한 거부·위치 없음 등 예외 상황 안내를 문서화해 두었고, v0.dev 프로토타입과 사용성 분석에서도 반영된 방향으로 이해했습니다.

---

## 11. 프로젝트 관리 방식

- GitHub Issue는 **프로젝트 제안서(Epic)** 형태로 관리.  
- 최초 이슈에 프로젝트 개요, 주요 기능, 시나리오별 스크린샷, 개발 계획을 담고, 꾸준히 갱신하는 “개발 일지” 형태보다는 **제안서 한 편**에 가깝게 유지하는 방식으로 이해했습니다.

---

## 12. 문서 간 관계 (참고)

- **requirements.md**: 기능 요구사항 상세 체크리스트  
- **user-flow.md**: 화면별 플로우·스펙·예외 시나리오  
- **data-structure.md**: 노선·역·거리·환승 데이터 구조  
- **architecture.md**: 기술 스택·폴더 구조·데이터 흐름  
- **api-research.md**: API 선정·필수/선택 데이터·캐싱 전략  
- **PROJECT_STATUS.md**: 진행 상황·Phase별 TODO·MVP 범위  

이 문서(concept-overview.md)는 **위 문서들을 관통하는 “무엇을, 왜, 어떻게 할 앱인지”**를 한 번에 읽을 수 있도록 한 개요입니다. 세부 스펙이 바뀌면 해당 문서를 수정하고, 필요 시 이 개요의 해당 절만 맞춰 수정하면 됩니다.

---

수정이 필요한 부분(예: 오프라인 범위, MVP 기능 목록, “지하철종결자”와의 비교 강조점, GPS 시나리오 설명 등)이 있으면 구체적으로 짚어 주시면, 그에 맞춰 이 문서를 수정하겠습니다.
