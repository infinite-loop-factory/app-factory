# 기능 요구사항 (Requirements)

이 문서는 Dist Interactive Metro 앱의 기능 요구사항을 상세히 정의합니다.

## 📋 프로젝트 개요

### 목표
- 출발 승강장에서 도착 승강장까지의 최적 경로를 거리 기반으로 추천
- **사용자 현재 위치 기반 최적화된 여러 옵션 경로 제안** (핵심 차별점)
- 지하철 노선 정보와 역 간 거리 데이터를 활용한 정확한 경로 탐색
- 직관적이고 빠른 경로 확인 경험 제공

### 범위
- **포함**: 역 선택, 경로 탐색, 거리 계산, 환승 정보 표시, GPS 기반 위치 추천, 소요 시간 계산
- **데이터 범위**: 전국 노선 지원 목표, 현재는 수도권까지 구현, 나머지는 TODO
- **참고 앱**: 지하철종결자 앱 방식 모방, 필요 부분만 개선

---

## ✅ 핵심 기능

### 1. 역 선택 기능
- [ ] **출발역 선택**
  - [ ] 역 검색 기능
  - [ ] 노선별 역 목록 표시
  - [ ] 최근 선택한 역 기록 (로컬 스토리지)
  - [ ] **GPS 기반 최근 역 추천** (현재 위치 기반)
- [ ] **도착역 선택**
  - [ ] 역 검색 기능
  - [ ] 노선별 역 목록 표시
  - [ ] 출발역과 동일한 역 선택 방지
- [ ] **역 검색**
  - [ ] 역명 검색 (한글, 영문)
  - [ ] 자동완성 기능
  - [ ] 검색 결과 하이라이트
- [ ] **위치 기반 기능**
  - [ ] GPS 권한 요청
  - [ ] 현재 위치 기반 최근 역 자동 추천
  - [ ] 위치 기반 경로 최적화

### 2. 경로 탐색 기능
- [ ] **최단 거리 경로**
  - [ ] 출발역-도착역 간 최단 거리 경로 계산
  - [ ] 다익스트라 알고리즘 또는 유사 알고리즘 구현
  - [ ] 경로별 총 거리 표시
- [ ] **최소 환승 경로**
  - [ ] 환승 횟수를 최소화하는 경로 탐색
  - [ ] 환승역 정보 표시
- [ ] **다중 경로 옵션** (핵심 기능)
  - [ ] 여러 경로 옵션 제공 (최단 거리, 최소 환승, 최적 경로 등)
  - [ ] **사용자 현재 위치 기반 최적화된 경로 제안**
  - [ ] 경로 비교 기능
  - [ ] 사용자 선택 가능
- [ ] **위치 기반 경로 최적화**
  - [ ] 현재 위치에서 가장 가까운 출발역 추천
  - [ ] 목적지 근처 하차역 추천
  - [ ] 전체 경로 거리 최소화

### 3. 경로 상세 정보
- [ ] **경로 요약**
  - [ ] 총 거리 표시 (미터 단위)
  - [ ] 환승 횟수 표시
  - [ ] 경유 역 개수 표시
- [ ] **구간별 상세 정보**
  - [ ] 각 구간별 거리 표시
  - [ ] 승차/하차 역 정보
  - [ ] 환승역 정보 및 환승 노선
  - [ ] 시각적 경로 표시 (노선도 형태)
- [ ] **소요 시간 계산** (필수 기능)
  - [ ] 역 간 이동 시간 계산
  - [ ] 환승 소요 시간 포함
  - [ ] 총 소요 시간 표시
  - [ ] 실시간 운행 정보 반영 (가능한 경우)

### 4. 데이터 관리
- [ ] **지하철 노선 데이터**
  - [ ] 노선별 역 목록 및 순서
  - [ ] 노선 색상 정보
  - [ ] 노선명 (한글, 영문)
  - [ ] **데이터 범위**: 전국 노선 지원 목표, 현재는 수도권까지
  - [ ] **데이터 소스**: 공공포탈 API 연동
- [ ] **역 간 거리 데이터**
  - [ ] 인접 역 간 거리 정보
  - [ ] 승강장 간 실제 거리 (미터 단위)
  - [ ] 환승 통로 거리 정보
  - [ ] **API 기반 데이터 업데이트**
- [ ] **환승 정보**
  - [ ] 환승 가능한 역 목록
  - [ ] 환승 노선 정보
  - [ ] 환승 통로 거리
- [ ] **데이터 업데이트**
  - [ ] 공공포탈 API를 통한 주기적 업데이트
  - [ ] 로컬 캐싱 전략
  - [ ] 오프라인 지원 (캐시된 데이터 활용)

---

## 🔧 기술적 요구사항

### 알고리즘
- [ ] **경로 탐색 알고리즘**
  - [ ] 그래프 구조로 노선/역 표현
  - [ ] 최단 경로 알고리즘 구현 (다익스트라, A* 등)
  - [ ] 다중 경로 탐색 지원
- [ ] **거리 계산**
  - [ ] 역 간 거리 누적 계산
  - [ ] 환승 거리 포함 계산
  - [ ] 정확도 보장

### 데이터 처리
- [ ] **데이터 로딩**
  - [ ] 공공포탈 API 연동
  - [ ] 효율적인 데이터 파싱
  - [ ] 메모리 최적화
  - [ ] 오프라인 지원 (캐시된 데이터 활용)
- [ ] **캐싱**
  - [ ] API 응답 데이터 로컬 캐싱
  - [ ] 자주 사용하는 경로 캐싱
  - [ ] 검색 결과 캐싱
  - [ ] AsyncStorage 또는 SQLite 활용
- [ ] **API 연동**
  - [ ] 공공포탈 API 클라이언트 구현
  - [ ] 데이터 업데이트 주기 관리
  - [ ] 에러 처리 및 재시도 로직

### UI/UX
- [ ] **반응형 디자인**
  - [ ] 다양한 화면 크기 대응
  - [ ] 터치 최적화 (44px 이상 터치 영역)
- [ ] **접근성**
  - [ ] 스크린 리더 지원
  - [ ] 색상 대비 확보
- [ ] **애니메이션**
  - [ ] 화면 전환 효과
  - [ ] 로딩 인디케이터
  - [ ] 경로 표시 애니메이션

### 성능
- [ ] **빠른 경로 탐색**
  - [ ] 경로 계산 시간 1초 이내
  - [ ] 대용량 데이터 처리 최적화
- [ ] **메모리 최적화**
  - [ ] 불필요한 리렌더링 방지
  - [ ] 효율적인 데이터 구조

---

## 📱 상세 요구사항

### 역 선택 화면
```
기능:
- 역 검색 입력 필드
- 노선별 역 목록 표시
- 최근 선택한 역 표시
- 출발/도착 선택 모드 전환

표시 정보:
- 역명 (한글, 영문)
- 소속 노선 정보
- 역 번호 (예: 1호선 101)
```

### 경로 결과 화면
```
기능:
- 경로 요약 정보 표시
- 구간별 상세 정보 표시
- 시각적 경로 표시 (노선도)
- 경로 옵션 선택 (최단 거리, 최소 환승)
- 다시 검색하기 버튼

표시 정보:
- 총 거리: "1.2km"
- 환승 횟수: "1회 환승"
- 경유 역: "5개 역"
- 소요 시간: "약 15분" (필수)
- 현재 위치 기반 최적 경로 표시
```

### 경로 상세 화면
```
기능:
- 단계별 경로 표시
- 각 구간별 거리 표시
- 환승역 정보 강조
- 노선도 형태 시각화

표시 형식:
1. 출발: 강남역 (2호선)
   → 0.8km → 역삼역 (2호선)
   → 0.9km → 선릉역 (2호선)
   → 환승 → 선릉역 (분당선)
   → 1.1km → 도착: 정자역 (분당선)
```

---

## 🎨 디자인 요구사항

### 색상 시스템
```
노선별 색상:
- 1호선: #0052A4 (파랑)
- 2호선: #00A84D (초록)
- 3호선: #EF7C1C (주황)
- 4호선: #00A5DE (하늘)
- 5호선: #996CAC (보라)
- 6호선: #CD7C2F (갈색)
- 7호선: #747F00 (올리브)
- 8호선: #E6186C (분홍)
- 9호선: #BDB092 (금색)
- (추가 노선 확장 가능)
```

### 타이포그래피
```
- 화면 제목: 24px, Bold
- 역명: 20px, Medium
- 거리 정보: 18px, Regular
- 설명 텍스트: 14px, Regular
- 버튼 텍스트: 16px, Medium
```

---

## 🧪 테스트 요구사항

### 기능 테스트
- [ ] 모든 역 조합에서 정확한 경로 탐색
- [ ] 환승 경로 정확성 확인
- [ ] 거리 계산 정확도 검증
- [ ] 에러 상황 처리 확인 (존재하지 않는 역 등)

### 성능 테스트
- [ ] 경로 탐색 시간 1초 이내
- [ ] 앱 시작 시간 3초 이내
- [ ] 메모리 사용량 최적화
- [ ] 대용량 데이터 처리 성능

---

## 📈 향후 확장 계획

### Phase 2
- [ ] 전국 노선 확장 (현재 수도권만 지원)
- [ ] 즐겨찾는 경로 저장
- [ ] 경로 공유 기능
- [ ] 실시간 지하철 운행 정보 연동
- [ ] 경로 히스토리

### Phase 3
- [ ] 알림 기능 (목적지 도착 알림 등)
- [ ] 다국어 지원 확대
- [ ] 고급 경로 필터링 옵션

---

## 📝 구현 참고사항

### 지하철종결자 앱 참고
- 지하철종결자 앱의 데이터 구조 및 경로 탐색 방식을 참고
- 필요 부분만 개선하여 구현

### 기술 스택
- 프로젝트 공유 기술 스택 최대한 활용
- 기존 패턴 및 컨벤션 준수
